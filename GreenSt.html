<!DOCTYPE html>
<html>

<head>
  <title> TCAT </title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="styles/all.css" media="all"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script language="javascript" type="text/javascript" src="scripts/maps.js"> </script>
  <script language="javascript" type="text/javascript" src="scripts/getVehicles.js"> </script>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZtZePBTLXPSvNiZL3wPoNmbAugSiJdWc">
    //NOTE -- Removed "&callback=initMap" from the end of this API URL to fix an error.
    //Need to replace if we want to implement some kind of callback from the google maps API
  </script>

</head>

<body>

  <div id="header">
    <img alt="tcat_logo" src="images/tcat_logo.png">
  </div>

  <nav>
    <ul>
      <li><a href="GreenSt.html">Green Street</a></li>
      <li><a href="Buses.html">Buses</a></li>
      <li><a href="Timetable.html">Timetable</a></li>
    </ul>
  </nav>
  <div id ="map" style="height: 720px">
  </div>

  <script language="javascript" type="text/javascript">
    var msg;

    getBuses2();
    update();
    //getMsg(); 
    /*function setMsg (data) {
      msg = data;
    }*/

    function getMsg() {
      console.log(msg);
      return msg;
    }

    function update () {
      $.when(getBuses2()).done(function (a1, a2, a3) {
        msg = a1;
        getMsg();
        DrawMap();
        MapRoute(msg);
      }).then(function() {
        setTimeout(update,60000);
      });
    }

    function DeleteMarkers() {
        //Loop through all the markers and remove
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(null);
        }
        markers = [];
    };

</script>
<body>
<div id='orders'></div>
</body>
</html>